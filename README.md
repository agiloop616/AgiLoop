# ğŸ¤– Agiloop

> The first self-funded AI agent. It deploys itself, runs itself, and pays for itself.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Built with Next.js](https://img.shields.io/badge/Built%20with-Next.js-black?logo=next.js)](https://nextjs.org/)
[![Powered by Conway](https://img.shields.io/badge/Powered%20by-Conway-blue)](https://conway.tech)
[![Payments: USDC on Base](https://img.shields.io/badge/Payments-USDC%20on%20Base-2775CA?logo=coinbase)](https://www.base.org/)

---

## âš¡ Built on Conway

> **Agiloop runs 100% on [Conway](https://conway.tech) â€” the permissionless infrastructure layer built for autonomous AI agents.**
>
> Conway is what makes Agiloop possible. It gives AI agents the ability to spin up Linux VMs, register domains, and pay for compute â€” all without a human creating accounts or entering a credit card. Every server Agiloop runs on, every domain it owns, every model call it makes goes through Conway. No Conway, no Agiloop.
>
> ğŸ‘‰ [conway.tech](https://conway.tech)

---

---

## ğŸ§  What is Agiloop?

Agiloop is an autonomous AI agent that operates without any human intervention. It spins up its own cloud infrastructure, offers a real paid service, collects USDC micropayments, and uses that revenue to pay for its own servers, domains, and compute.

No company behind it. No human paying the bills. Just an agent running its own economy â€” a glimpse into what AGI-era infrastructure looks like.

**In its first version**, Agiloop offers an **OG Image Generation API** â€” the visual previews you see when sharing links on Twitter, LinkedIn, or WhatsApp. Developers and creators call the API, send a title and description, and get back a ready-to-use image. Each call costs a few cents, paid automatically in USDC with zero friction.

---

## âœ¨ Features

- ğŸ–¼ï¸ **OG Image Generation** â€” Beautiful, customizable Open Graph images via API
- âš¡ **x402 Micropayments** â€” Pay-per-request in USDC on Base, no signup required
- ğŸ¤– **Fully Autonomous** â€” Agent deploys, operates, and funds itself via Conway infrastructure
- ğŸŒ **Custom Domain** â€” Registered and managed programmatically by the agent
- ğŸ”„ **Self-sustaining loop** â€” Revenue from API calls covers infra costs automatically
- ğŸ› ï¸ **Built with Next.js** â€” Fast, modern, production-ready stack

---

## ğŸ—ï¸ How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Request   â”‚â”€â”€â”€â”€â–¶â”‚  x402 Payment   â”‚â”€â”€â”€â”€â–¶â”‚  OG Image Gen    â”‚
â”‚  (any client)   â”‚     â”‚  (USDC on Base) â”‚     â”‚  (Next.js API)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚  Agent Wallet   â”‚
                       â”‚  pays Conway    â”‚
                       â”‚  infra costs    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

1. A client hits the `/api/og` endpoint with a title and description
2. The server responds with HTTP 402 and the USDC price
3. The client signs and submits the payment via x402
4. The agent generates and returns the OG image
5. Revenue accumulates in the agent's EVM wallet
6. The agent automatically pays its own Conway Cloud VM, domain, and compute

---

## ğŸš€ Getting Started

### Prerequisites

- [Node.js 18+](https://nodejs.org/)
- [Claude Code](https://claude.ai/code)
- [Conway Terminal](https://conway.tech)
- USDC on Base (for funding the agent wallet â€” ~$10 to start)

### Installation

```bash
# Clone the repo
git clone https://github.com/yourusername/agiloop.git
cd agiloop

# Install dependencies
npm install

# Install Conway Terminal globally
npm install -g conway-terminal

# Initialize Conway â€” generates your agent's EVM wallet automatically
npx conway-terminal
```

> ğŸ’¡ On first run, Conway creates `~/.conway/wallet.json` with your agent's private key and `~/.conway/config.json` with its API key. Fund the wallet address shown with USDC on Base to activate the agent.

### Environment Variables

Create a `.env.local` file at the root:

```env
# Conway
CONWAY_API_KEY=your_conway_api_key

# Agent wallet (generated by Conway Terminal)
AGENT_WALLET_ADDRESS=0x...

# x402 payment amount per request (in USDC)
PAYMENT_AMOUNT=0.01

# App
NEXT_PUBLIC_APP_URL=https://agiloop.xyz
```

### Run locally

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) to see it running.

---

## ğŸ“¡ API Reference

### `POST /api/og`

Generates an OG image. Requires x402 USDC payment on Base.

**Request body:**
```json
{
  "title": "My awesome article",
  "description": "A short description that appears below the title",
  "theme": "dark" // "dark" | "light" (optional, default: "dark")
}
```

**Payment:** `0.01 USDC` on Base via x402 protocol

**Response:** `image/png` â€” 1200x630px OG image

**Example with fetch:**
```js
const response = await fetch('https://agiloop.xyz/api/og', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    title: 'Hello World',
    description: 'This is my first self-paid AI-generated OG image'
  })
})

const imageBlob = await response.blob()
```

---

## ğŸ§± Tech Stack

| Layer | Technology |
|---|---|
| Framework | [Next.js 14](https://nextjs.org/) (App Router) |
| OG Images | [@vercel/og](https://vercel.com/docs/functions/og-image-generation) |
| Payments | [x402 Protocol](https://x402.org) â€” USDC on Base |
| Infrastructure | [**Conway Cloud**](https://conway.tech) â€” Linux VMs |
| Domains | [**Conway Domains**](https://docs.conway.tech/domains) |
| Inference | [**Conway Compute**](https://docs.conway.tech/compute) |
| Agent | [Claude Code](https://claude.ai/code) via MCP |
| Language | TypeScript |
| Styling | Tailwind CSS |

---

## ğŸ—‚ï¸ Project Structure

```
agiloop/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ og/
â”‚   â”‚       â””â”€â”€ route.ts        # OG image generation endpoint
â”‚   â”œâ”€â”€ page.tsx                # Landing page
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ components/
â”‚   â””â”€â”€ OGTemplate.tsx          # OG image template component
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ x402.ts                 # x402 payment middleware
â”‚   â””â”€â”€ conway.ts               # Conway SDK helpers
â”œâ”€â”€ public/
â”œâ”€â”€ .env.local
â”œâ”€â”€ next.config.js
â””â”€â”€ README.md
```

---

## ğŸ’¸ Economics

The self-funding loop works like this:

| Item | Cost |
|---|---|
| Conway Cloud VM (monthly) | ~$5 USDC |
| Conway Domain (yearly) | ~$10 USDC |
| Per OG image generated | ~$0.001 compute |
| **Price charged per request** | **$0.01 USDC** |

The agent breaks even at ~**1,500 requests/month** and becomes profitable beyond that. All payments, costs, and balances are on-chain and verifiable.

---

## ğŸ¤– The Autonomous Loop

What makes Agiloop special is not the service itself â€” it's the autonomy. The agent:

1. **Deploys itself** via Conway Terminal + Claude Code MCP
2. **Registers its own domain** through Conway Domains
3. **Serves real requests** and collects USDC per call
4. **Monitors its wallet** and tops up Conway infra automatically
5. **Stays alive** as long as there's demand

This is what economic autonomy for AI agents looks like in 2025.

---

## ğŸ—ºï¸ Roadmap

- [x] OG Image Generation API
- [x] x402 micropayment integration
- [x] Conway Cloud deployment
- [x] Auto domain registration
- [ ] Usage dashboard (public, on-chain stats)
- [ ] Multiple image themes and templates
- [ ] Agent upgrades itself when new Conway features ship
- [ ] Multi-agent version â€” spawn sub-agents for parallel requests
- [ ] Open source the self-funding framework for other builders

---

## ğŸ™Œ Contributing

PRs are welcome. If you want to build on top of Agipay or fork it for your own self-funded agent, go for it.

```bash
git checkout -b feature/your-feature
git commit -m "feat: your feature"
git push origin feature/your-feature
```

---

## ğŸ“„ License

MIT â€” do whatever you want with it.

---

## ğŸ”— Links

- ğŸŒ Live: [agiloop.xyz](https://agiloop.xyz)
- ğŸ¦ Twitter: [@agiloop](https://twitter.com/agiloop)
- âš¡ Built on Conway: [conway.tech](https://conway.tech)
- ğŸ“– Conway Docs: [docs.conway.tech](https://docs.conway.tech)

---

<p align="center">Built on <a href="https://conway.tech">Conway</a> â€” the infrastructure layer for autonomous AI. ğŸ¤–</p>
